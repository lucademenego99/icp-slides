<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Functional Programming</title>

  <!-- Main Reveal Stylesheet -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@4.1.0/dist/reveal.css">

  <!-- Blood Reveal Theme Stylesheet -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@4.1.0/dist/theme/white.css" id="theme">

  <!-- Highlight.js Theme -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/styles/monokai.min.css">

  <!-- Custom stylesheet to make reveal work with our playgrounds -->
  <link rel="stylesheet" href="https://lucademenego99.github.io/icp-bundle/base/custom-style.css">

  <!-- Bundle containing the code playground web components -->
  <script src="https://lucademenego99.github.io/icp-bundle/base/standard-ml.iife.js"></script>

  <style>
    pre code {
      padding: min(1vw, 2vh) !important;
    }

    .code {
      padding: 0 min(1vw, 2vh);
      background-color: rgb(215, 237, 255);
      font-family: monospace;
    }

    .code-2 {
      padding: 0 min(0.8vw, 1.5vh);
      background-color: rgb(234, 246, 255);
      font-family: monospace;
    }

    .error {
      color: red;
    }

    .ok {
      color: green;
    }

    .warning {
      color: rgb(218, 141, 0);
    }

    .bold {
      font-weight: bold;
    }

    .row {
      width: min(80vw, 160vh);
      gap: min(1.5vw, 2.8vh);
    }

    .xxsmall {
      font-size: min(0.9vw, 1.8vh);
    }

    .mt {
      margin-top: min(1vw, 2vh) !important;
    }

    .ml {
      margin-left: min(1vw, 2vh) !important;
    }

    .mt2 {
      margin-top: min(3vw, 6vh) !important;
    }

    .mb {
      margin-bottom: min(1vw, 2vh) !important;
    }

    .mb2 {
      margin-bottom: min(3vw, 6vh) !important;
    }

    .ml {
      margin-left: min(1vw, 2vh) !important;
    }

    .ml2 {
      margin-left: min(3vw, 6vh) !important;
    }

    li {
      margin-bottom: min(1vw, 1.8vh) !important;
    }

    .key__button {
      box-sizing: border-box;
      line-height: min(2vw, 4vh);
      font-size: min(1.4vw, 2.8vh);
      text-align: center;
      color: #555;
      cursor: pointer;
      margin: 0 min(0.5vw, 1vh);
      min-width: min(2.3vw, 4.6vh);
      height: min(2.3vw, 4.6vh);
      padding: 0 min(0.5vw, 1vh);
      border-color: #f2f2f2;
      border-style: solid;
      text-shadow: 0 0.5px 1px #777, 0 2px 6px #f2f2f2;
      border-width: 1px;
      border-radius: 10px;
      background: -webkit-linear-gradient(top, #f9f9f9 0%, #D2D2D2 80%, #c0c0c0 100%);
      font-family: sans-serif;
      display: inline-block;
      transition: box-shadow 0.3s ease, transform 0.15s ease;
      box-shadow: 0 0 1px #888, 0 1px 0 #fff, 0 6px 0 #C0C0C0, 0 8px 17px rgba(#444, 0.4), 2px 1px 4px rgba(#444, 0.25), -2px 1px 4px rgba(#444, 0.25), 0 9px 16px rgba(#444, 0.1);
    }
  </style>
</head>

<!-- For more information on reveal.js: https://revealjs.com/ -->

<body class="h-screen full-page-demo reveal-viewport" data-page="icp" style="transition: transform 0.8s ease 0s;">
  <div class="reveal slide focused has-horizontal-slides ready" role="application" data-transition-speed="default"
    data-background-transition="fade">
    <div class="slides">

      <!-- Each <section> is a slide -->
      <section>
        <!-- title class: custom style for titles -->
        <h3 class="title">Functional Programming</h3>
        <p class="subtitle">The ML type system</p>

        <p class="mt2" style="color:rgb(134, 134, 134)">Shortcuts</p>
        <div style="text-align: left">
          <p style="line-height: 2vw; font-size: 1.7vw; color:rgb(134, 134, 134)"><span class='key__button'>F</span> for
            fullscreen</p>
          <p style="line-height: 2vw; font-size: 1.7vw; color:rgb(134, 134, 134)"><span class='key__button'>CTRL</span>
            + <span class='key__button'>ENTER</span> to execute code</p>
        </div>

        <p class="xsmall mt2" id="print-version-text"><a href="?print-pdf">Click here</a> for the printable
          version</p>
      </section>

      <section>
        <h3 class="title">Introduction</h3>
        <div class="row">
          <div class="col">
            <ul>
              <li>Basic types: <span class="code">int</span>, <span class="code">real</span>, <span
                  class="code">bool</span>, <span class="code">char</span>, <span class="code">string</span></li>
              <li>Complex types: for now, 2 constructors:</li>
              <ul>
                <li><span class="code">T1 * T2 * ... * Tn</span> (tuples)</li>
                <li><span class="code">T list</span></li>
              </ul>
            </ul>
          </div>
          <div class="col small-code">
            <standardml-editor contenteditable="true" code='val ex1 = [1,2,3];

val ex2 = ("ab", [1,2,3], 4);

val ex3 = [[(1,2),(3,4)], [(5,6)], nil];'></standardml-editor>
          </div>
        </div>
      </section>

      <section>
        <h3 class="title">Exercise 1</h3>
        <p>What are the values of the following expressions?</p>
        <div class="med-code">
          <standardml-editor contenteditable="true" code='#2 (3,4,5);

hd [3,4,5];

tl [3,4,5];'></standardml-editor>
        </div>
      </section>

      <section>
        <h3 class="title">Exercise 2</h3>
        <p>What are the values of the following expressions?</p>
        <div class="med-code">
          <standardml-editor contenteditable="true" code='explode ("foo");

implode ([#"f", #"o", #"o"]);

"c" :: ["a", "t"];'></standardml-editor>
        </div>
      </section>

      <section>
        <h3 class="title">Exercise 3</h3>
        <p>What is wrong with the following expressions? When possible, correct them</p>
        <div class="row">
          <div class="col small-code">
            <pre><code class="sml">#4 (3,4,5);</code></pre>
            <pre class="fragment" data-fragment-index="0"><code class="text error bold xxsmall">poly: : error: Type error in function application.
  Function: #4 : 'a * 'b * 'c * 'd -> 'd</code></pre>
          </div>

          <div class="col small-code">
              <pre><code class="sml">hd([]);</code></pre>
            <pre class="fragment" data-fragment-index="0"><code class="text error bold xxsmall">poly: : warning: The type of (it) contains a free type
  variable. Setting it to a unique
  monotype.
  Exception- Empty raised</code></pre>
          </div>
        </div>
      </section>

      <section>
        <h3 class="title">Exercise 4</h3>
        <p>What is wrong with the following expressions? When possible, correct them</p>
        <div class="row mt2">
          <div class="col small-code">
            <pre><code class="sml">#1 (1);</code></pre>
          <pre class="fragment" data-fragment-index="0"><code class="text error bold xxsmall">poly: : error: Type error in function application.
  Function: #1 : {1: 'a, ...} -> 'a
  Argument: (1) : int</code></pre>
          </div>
          <div class="col small-code">
            <pre><code class="sml">explode ["bar"];</code></pre>
          <pre class="fragment" data-fragment-index="0"><code class="text error bold xxsmall">poly: : error: Type error in function application.
  Function: explode : string -> char list
  Argument: ["bar"] : string list</code></pre>
          </div>
        </div>
      </section>

      <section>
        <h3 class="title">Exercise 5</h3>
        <p>What is wrong with the following expressions? When possible, correct them</p>
        <div class="row mt2">
          <div class="col small-code">
            <pre><code class="sml">implode ( #"a", #"b") ;</code></pre>
          <pre class="fragment" data-fragment-index="0"><code class="text error bold xxsmall">poly: : error: Type error in function application.
  Function: implode : char list -> string</code></pre>
          </div>
          <div class="col small-code">
            <pre><code class="sml">["r"]::["a","t"];</code></pre>
          <pre class="fragment" data-fragment-index="0"><code class="text error bold xxsmall">poly: : error: Type error in function application.
  Function: :: : string list * string list list -> string list list
  Argument: (["r"], ["a", "t"]) : string list * string list</code></pre>
          </div>
        </div>
      </section>

      <section>
        <h3 class="title">Exercise 6</h3>
        <p>What is wrong with the following expressions? When possible, correct them</p>
        <div class="row mt2">
          <div class="col small-code">
            <pre><code class="sml">tl [];</code></pre>
          <pre class="fragment" data-fragment-index="0"><code class="text error bold xxsmall">poly: : warning: The type of (it) contains a free type
  variable. Setting it to a unique monotype.
  Exception- Empty raised</code></pre>
          </div>
          <div class="col small-code">
            <pre><code class="sml">1 @ 2;</code></pre>
          <pre class="fragment" data-fragment-index="0"><code class="text error bold xxsmall">poly: : error: Type error in function application.
  Function: @ : 'a list * 'a list -> 'a list
  Argument: (1, 2) : int * int</code></pre>
          </div>
        </div>
      </section>

      <section>
        <h3 class="title">Exercise 7</h3>
        <p>What are the types of the following expressions?</p>
        <div class="med-code">
          <standardml-editor contenteditable="true" code='(1.5, ("3",[4,5]));

[[1,2],nil,[3]];'></standardml-editor>
        </div>
      </section>

      <section>
        <h3 class="title">Exercise 8</h3>
        <p>What are the types of the following expressions?</p>
        <div class="med-code">
          <standardml-editor contenteditable="true" code='[ (2,3.5), (4,5.5), (6,7.5)];

([#"a", #"b"], [nil,[1,2,3]]);'></standardml-editor>
        </div>
      </section>

      <section>
        <h3 class="title">Exercise 9</h3>
        <p>Give examples of objects of the following types, without using empty lists</p>
        <div style="width: min(60vw, 120vh)">
          <pre><code class="sml">int list list list</code></pre>
          <pre><code class="sml">(int * char) list</code></pre>
          <pre><code class="sml">string list * ( int * (real * string) * int</code></pre>
        </div>
      </section>

      <section>
        <h3 class="title">Exercise 10</h3>
        <p>Give examples of objects of the following types, without using empty lists</p>
        <div style="width: min(60vw, 120vh)">
          <pre><code class="sml">((int * int) * (bool list) * real) * (real * string)</code></pre>
          <pre><code class="sml">(bool * int) * char</code></pre>
          <pre><code class="sml">real * int list list list list</code></pre>
        </div>
      </section>

      <section>
        <h3 class="title">Functions</h3>
        <div class="row">
          <div class="col">
            <ul>
              <li>On the right: function to convert characters from lower to upper case</li>
              <li>Poly gives the <em>type</em> of the function. This is</li>
              <ul>
                <li>The keyword <span class="code">fn</span></li>
                <li>The type of the argument</li>
                <li>The symbol <span class="code">-></span></li>
                <li>The type of the result</li>
              </ul>
              <li>There are two ways to use the function!</li>
            </ul>
          </div>
          <div class="col small-code">
            <standardml-editor contenteditable="true" code='fun upper(c) = chr (ord(c) - 32);

(* First way of using the function *)
upper (#"b");

(* Second way of using the function *)
upper #"b";'></standardml-editor>
          </div>
        </div>
      </section>

      <section>
        <h3 class="title">The ML type system</h3>
        <ul>
          <li>If <span class="code">T1</span> and <span class="code">T2</span> are types, so is <span class="code">T1 ->
              T2</span></li>
          <ul>
            <li>This is the type of functions that takes an object of type <span class="code">T1</span> and produce one
              of type <span class="code">T2</span></li>
          </ul>
          <li>Note that <span class="code">T1</span> and <span class="code">T2</span> can be any type, including
            function types</li>
          <li>Associativity:</li>
          <ul>
            <li><span class="code">T1 -> T2 -> T3</span><br>means</li>
            <li><span class="code">T1 -> (T2 -> T3)</span></li>
          </ul>
        </ul>
      </section>

      <section>
        <h3 class="title">Specifying types</h3>
        <div class="row">
          <div class="col">
            <ul>
              <li>ML deduces the types of functions automatically, as in our first example</li>
              <li>On the right you can see another example</li>
              <li>But multiplication is also defined for reals. If we want to square reals number, <span
                  class="error bold">what should we do?</span></li>
              <ul>
                <li><span class="fragment ok bold" data-fragment-index="0">Manually specify the type!</span></li>
              </ul>
            </ul>
          </div>
          <div class="col">
            <div class="r-stack" style="justify-content: center">
              <div class="small-code fragment fade-out" data-fragment-index="0">
                <standardml-editor contenteditable="true" code='fun square (x) = x * x;'></standardml-editor>
              </div>
              <div class="small-code fragment fade-in" data-fragment-index="0">
                <standardml-editor contenteditable="true" code='fun square (x:real) = x * x;'></standardml-editor>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section>
        <h3 class="title">Example</h3>
        <p>Use of a function:</p>
        <div class="med-code">
          <standardml-editor contenteditable="true" code='val radius = 4.0;
val pi = 3.14159;

fun square (x:real) = x * x;

pi * square (radius);'></standardml-editor>
        </div>
      </section>

      <section>
        <h3 class="title">Multiple arguments</h3>
        <div class="row">
          <div class="col">
            <ul>
              <li>All functions in ML have exactly one parameter</li>
              <li>But this parameter can be a tuple</li>
              <li>On the right you can see an example to calculate the largest of three reals</li>
              <li class="error bold">What would happen if we didn't specify that <span class="code">a</span> was real?</li>
              <ul>
                <li><span class="fragment ok bold" data-fragment-index="0">It would become a function on integers!</span></li>
              </ul>
            </ul>
          </div>
          <div class="col">
            <div class="r-stack" style="justify-content: center">
              <div class="small-code fragment fade-out" data-fragment-index="0">
                <standardml-editor contenteditable="true" code='fun max3(a:real,b,c) = (* maximum of reals *)
  if a>b then
    if a>c then a else c
  else
    if b>c then b else c;

max3(5.0, 4.0, 7.0);'></standardml-editor>
              </div>
              <div class="small-code fragment fade-in" data-fragment-index="0">
                <standardml-editor contenteditable="true" code='fun max3(a,b,c) =
  if a>b then
    if a>c then a else c
  else
    if b>c then b else c;

max3(5, 4, 7);'></standardml-editor>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section>
        <h3 class="title">Tuples</h3>
        <div class="row">
          <div class="col">
            <ul>
              <li>Since the function takes a single parameter, of type <span class="code">tuple</span>, we can also write:</li>
            </ul>
          </div>
          <div class="col small-code">
            <standardml-editor contenteditable="true" code='fun max3(a,b,c) =
  if a>b then
    if a>c then a else c
  else
    if b>c then b else c;

val t = (4, 5, 6);
max3 t;'></standardml-editor>
          </div>
        </div>
      </section>

      <section>
        <h3 class="title">Referencing external values</h3>
        <p>What is the result of this code?</p>
        <p class="fragment ok bold">The value of <span class="code">x</span> is the value when the function is defined!</p>
        <div class="med-code">
          <standardml-editor contenteditable="true" code='val x=3;
fun addx(a) = a+x;
val x=10;
addx(2);'></standardml-editor>
      </section>

      <section>
        <h3 class="title">Exercise 1</h3>
        <p>Write a function to compute the cube of a real number</p>
      </section>

      <section>
        <h3 class="title">Exercise 2</h3>
        <p>Write a function to compute the smallest component of a tuple of type <span class="code">int*int*int</span></p>
      </section>

      <section>
        <h3 class="title">Exercise 3</h3>
        <p>Find the third element of a list (it doesn't have to work properly on shorter lists)</p>
      </section>

      <section>
        <h3 class="title">Exercise 4</h3>
        <p>Write a function to reverse a tuple of length 3</p>
      </section>

      <section>
        <h3 class="title">Exercise 5</h3>
        <p>Find the third character of a string (it doesn't have to work properly on shorter strings)</p>
      </section>

      <section>
        <h3 class="title">Exercise 6</h3>
        <p>Cycle a list once, i.e., convert [a1,...an] to [a2,...an,a1]. It doesn't have to work on the empty list</p>
      </section>

      <section>
        <h3 class="title">Exercise 7</h3>
        <p>Given 3 integers, produce a pair consisting of the smallest and the largest</p>
      </section>

      <section>
        <h3 class="title">Exercise 8</h3>
        <p>Given 3 integers, produce a list of them in sorted order</p>
      </section>

      <section>
        <h3 class="title">Exercise 9</h3>
        <p>Round a real number to the nearest 10th</p>
      </section>

      <section>
        <h3 class="title">Exercise 10</h3>
        <p>Given a list, remove the second element. It doesn't need to work on lists shorter than 2</p>
      </section>

      <section>
        <h3 class="title">Exercise 11</h3>
        <p>What do <span class="code">f(4)</span> and <span class="code">f(4)+b</span> produce?</p>
        <div class="med-code">
          <standardml-editor contenteditable="true" code='val a=2;
fun f(b)=a*b;
val b=3;
fun g(a) = a+b;

f(4);

f(4) + b;'></standardml-editor>
      </section>

      <section>
        <h3 class="title">Exercise 12</h3>
        <p>What do <span class="code">g(5)</span> and <span class="code">g(5)+a</span> produce?</p>
        <div class="med-code">
          <standardml-editor contenteditable="true" code='val a=2;
fun f(b)=a*b;
val b=3;
fun g(a) = a+b;

g(5);

g(5) + a;'></standardml-editor>
      </section>

      <section>
        <h3 class="title">Exercise 13</h3>
        <p>What do <span class="code">f(g(6))</span> and <span class="code">g(f(7))</span> produce?</p>
        <div class="med-code">
          <standardml-editor contenteditable="true" code='val a=2;
fun f(b)=a*b;
val b=3;
fun g(a) = a+b;

f(g(6));

g(f(7));'></standardml-editor>
      </section>
    </div>
  </div>

  <!-- Import the main reveal script -->
  <script src="https://cdn.jsdelivr.net/npm/reveal.js@4.1.0/dist/reveal.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/reveal.js@4.1.0/plugin/highlight/highlight.js"></script>

  <!-- Initialize reveal -->
  <script>
    Reveal.initialize({
      plugins: [RevealHighlight],
      // Display an help overlay when ? is pressed
      help: false,
      // Display controls in the bottom right corner
      controls: true,
      // Display a presentation progress bar
      progress: true,
      // Push each slide change to the browser history
      history: true,
      // Enable keyboard shortcuts for navigation
      keyboard: true,
      // Enable the slide overview mode
      overview: true,
      // Enable the slide number counter
      slideNumber: 'c/t',
      // Set the width of the slides
      width: "90%",
      // Set the height of the slides
      height: "90%",
      // Vertical centering of slides
      center: true,
      // Loop the presentation
      loop: false,
      // Enables touch navigation on devices with touch input
      touch: true,
      // Apply a 3D roll to links on hover
      rollingLinks: true,
      // Transition style for full page slide backgrounds
      backgroundTransition: 'fade', // none/fade/slide/convex/concave/zoom
      // Select a theme
      theme: 'white',
      // Select the type of slides transition
      transition: 'fade',
      // IMPORTANT: disable the default layout (centering and scaling) to make the code editors work correctly
      disableLayout: true
    });
  </script>

  <!-- If the user asks for the pdf version, set section height to auto -->
  <!-- Otherwise reveal.js breaks if the section height is set to 100% -->
  <script>
    if (window.location.href.indexOf('?print-pdf') > -1) {
      // Create a new css element setting the height of .section to none
      var css = document.createElement("style");
      // Modify section height to fix the layout
      // Modify .reveal .slides>section.stack pointer events, otherwise the code editors won't work
      // Hide the slide context (the slide number)
      css.innerHTML = "body {width: unset !important;} section { height: auto !important; } .reveal .slides>section.stack {pointer-events: all !important;} .slide-context {display: none;} html.print-pdf .reveal .slides section {display: flex !important; left: 0 !important;}";
      // Append the css to the head
      document.head.appendChild(css);

      const printVersionText = document.getElementById('print-version-text');
      printVersionText.innerHTML = `<a href="?">Click here</a> to go back to the slides`;
    }
  </script>
</body>

</html>